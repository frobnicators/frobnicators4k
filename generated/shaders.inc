#pragma data_seg(push, ".shaders")
static const char * _shaders[] = {
	{ "#version 150\n#extension GL_ARB_explicit_attrib_location:enable\nuniform float time;float max_dist;struct Ray{vec3 po;vec3 d;};\nvec4 scene(vec3 p);vec3 slight(Ray r, vec4 c);vec3 bg(Ray r, vec4 c);float db(vec3 v,vec3 f,vec3 w){vec3 d=abs(f-v)-w;return max(d.x,max(d.y,d.z));}vec3 pm(vec3 v){return mod((v*34.+1.)*v,289);}float sn(vec2 v){const vec4 d=vec4(.211,.366,-.577,.024);vec2 f=floor(v+dot(v,d.yy)),s=v-f+dot(f,d.xx),m;m=s.x>s.y?vec2(1.,0.):vec2(0.,1.);vec4 i=s.xyxy+d.xxzz;i.xy-=m;vec3 z=pm(pm(f.y+vec3(0.,m.y,1.))+f.x+vec3(0.,m.x,1.)),x=max(.5-vec3(dot(s,s),dot(i.xy,i.xy),dot(i.zw,i.zw)),0.);x=pow(x,vec3(4));vec3 w=2.*fract(z*d.www)-1.,o=abs(w)-.5,y=floor(w+.5),p=w-y;x*=1.79-.85*(p*p+o*o);vec3 r;r.x=p.x*s.x+o.x*s.y;r.yz=p.yz*i.xz+o.yz*i.yw;return 130.*dot(x,r);}float fbm(in vec2 v,int w){float f=0.;for(float d=0;d<w;d++)f+=pow(.3,d)*sn(pow(2.,d)*v);return f;}vec4 cry(inout Ray v,float w){vec3 f=v.po;float d=0;for(int r=0;d<w;r++){vec4 i=scene(v.po);if(i.w<.001)return v.po+=v.d*clamp(i.w,-10.,0),i;i.w=max(.001*d,i.w);v.po+=v.d*i.w;d=length(f-v.po);}return vec4(-1);}vec3 n_at(vec3 v){vec3 i;i.x=scene(v+vec3(.001,0,0)).w-scene(v-vec3(.001,0,0)).w;i.y=scene(v+vec3(0,.001,0)).w-scene(v-vec3(0,.001,0)).w;i.z=scene(v+vec3(0,0,.001)).w-scene(v-vec3(0,0,.001)).w;return normalize(i);}vec3 light(Ray v,vec4 i,vec3 w){vec3 f=v.po-w;float d=length(f);f=normalize(f);vec3 m=n_at(v.po);float z=max(dot(-f,m),0.);vec3 x=i.xyz*z*vec3(.8);return x+i.xyz*vec3(.2);}vec3 rym(Ray v,float d,int w){vec3 f;for(int i=0;i<w+1;++i){vec4 m=cry(v,max_dist);if(m.x>-.5)f=mix(slight(v,m),f,d*i/2.),v.d=reflect(v.d,n_at(v.po)),v.po+=v.d;else{f=mix(bg(v,m),f,d*i/2.);break;}}return f;}" },
	{ "in vec2 p;in vec3 ro,rd;uniform float syc,s2;out vec3 oc;void main(){max_dist=100.;Ray v;v.po=ro;v.d=normalize(rd);float r=2.;int s=0;if(time<50.||time>87)r=1.5,s=1;if(time>=50.)max_dist=500.;oc=rym(v,r,s);}vec4 scene(vec3 v){if(time<50.)return vec4(.7,0,.7,db(mod(v,vec3(20)),vec3(10),vec3(6))+.5*sin(time)*fbm(.2*v.xz,1));else return vec4(.1,.8,.3,v.y+50.-fbm(v.xz/100.,6)*30.);}vec3 lpos(Ray v){if(time<50.)return ro+vec3(0.,0.,20.);else return v.po+vec3(0,50-syc*20.,50);}vec3 slight(Ray v,vec4 s){return light(v,s,lpos(v))+s.xyz*.1;}vec3 bg(Ray v,vec4 s){if(time<50.)return vec3(s2,syc,syc);else{float r=clamp(sin(time),0.,1.);return vec3(p.x,p.y,0)*.5+vec3(syc*r,s2,syc*(1-r));}}" },
	{ "layout(location=0)in vec2 ip;out vec2 p;out vec3 ro,rd;void main(){float v=1.;if(time>33.)v=2.;if(time>58.)v=5.;if(time>65.)v=7.;p=ip;gl_Position=vec4(ip,0.,1.);vec3 t=gl_Position.xyz*vec3(1.78,1.,0)+vec3(0,0,-1);ro=vec3(0,0,-5+time*v);rd=vec3(t.x,t.y,-t.z);}" },
};
#pragma data_seg(pop)
